<!DOCTYPE html>
<html lang="ru" ng-app="App">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AngularJS</title>
	<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="css/style.css" rel="stylesheet">
</head>
<body ng-controller="ListCtrl">
	<div class="back" ng-show="userAdd">
		<form class="col-md-4 col-md-offset-4 myForm" name="myForm">
			<h3>Добавление пользователей</h3>
			<div class="form-group">
				<label for="InputUsername">Username</label>
				<input type="text" class="form-control" ng-model="username" placeholder="Username" name="username" required>
				<div class="hiding" ng-show="myForm.username.$dirty && myForm.username.$invalid"><span ng-show="myForm.username.$error.required" class="message-error">Поле должно быть заполнено</span></div>
			</div>
			<div class="form-group">
				<label for="InputFirstname">Firstname</label>
				<input type="text" class="form-control" ng-model="firstname" placeholder="Firstname" name="firstname" required>
				<div class="hiding" ng-show="myForm.firstname.$dirty && myForm.firstname.$invalid"><span ng-show="myForm.firstname.$error.required" class="message-error">Поле должно быть заполнено</span></div>
			</div>
			<div class="form-group">
				<label for="InputLastname">Lastname</label>
				<input type="text" class="form-control" ng-model="lastname" placeholder="Lastname" name="lastname" required>
				<div class="hiding" ng-show="myForm.lastname.$dirty && myForm.lastname.$invalid"><span ng-show="myForm.lastname.$error.required" class="message-error">Поле должно быть заполнено</span></div>
			</div>
			<div class="form-group">
				<label for="InputAge">Age</label>
				<input type="number" class="form-control" ng-model="age" placeholder="Age" name="age" required>
				<div class="hiding" ng-show="myForm.age.$dirty && myForm.age.$invalid"><span ng-show="myForm.age.$invalid.age" class="message-error">Укажите только цифры</span></div>
			</div>
			<div class="form-group">
				<label for="InputEmail">Email</label>
				<input type="email" class="form-control" ng-model="email" placeholder="Email" name="email" required>
				<span ng-show="myForm.email.$error.email" class="message-error">Неверный адрес</span>
				<div class="hiding" ng-show="myForm.email.$dirty && myForm.email.$invalid"><span ng-show="myForm.email.$error.required" class="message-error">Поле должно быть заполнено</span></div>
			</div>
			<input type="submit" class="btn btn-success" placeholder="Добавить" ng-click="addRow(user);userAdd = !userAdd" ng-disabled="myForm.username.$dirty && myForm.username.$invalid || myForm.firstname.$dirty && myForm.firstname.$invalid || myForm.lastname.$dirty && myForm.lastname.$invalid || myForm.age.$dirty && myForm.age.$invalid || myForm.email.$dirty && myForm.email.$invalid || myForm.$invalid"></input>
			<button type="button" class="btn btn-danger col-md-offset-1" ng-click="userAdd = !userAdd">Отмена</button>
			<span ng-show="myForm.$invalid" class="message-error"><br>Проверьте что все поля заполнены и данные корректны</span>
		</form>	
	</div>
	<div class="container">
		<h2>Задание для 
			<a href="http://www.sibers.ru/"><img src="img/logo.png" alt="Sibers"></a>
			<p class="sign">Количество пользователей: {{users.length}}</p>
			<br>
			<button class="btn btn-default" type="submit" ng-click="userAdd = !userAdd">
				Добавить пользователя
			</button>
		</h2>		
		<div class="row up">
			<div class="col-md-1 cell spec">username</div>
			<div class="col-md-1 cell">firstname</div>
			<div class="col-md-1 cell">lastname</div>
			<div class="col-md-1 cell">age</div>
			<div class="col-md-2 cell">email</div>
			<div class="col-md-3 cell">Место для кнопок</div>
			<div class="col-md-3 cell spec">Место для кнопок</div>
		</div>
		<div class="row" ng-repeat="user in users">
			<div class="col-md-1 cell">{{user.username}}</div>
			<div class="col-md-1 cell">{{user.firstname}}</div>
			<div class="col-md-1 cell">{{user.lastname}}</div>
			<div class="col-md-1 cell">{{user.age}}</div>
			<div class="col-md-2 cell">{{user.email}}</div>
			<div class="col-md-3 cell">
				<button type="button" class="btn btn-warning">Редактировать</button>
			</div>
			<div class="col-md-3 cell">
				<button type="button" class="btn btn-danger" ng-show="!button" ng-click="userDelete = !userDelete; button = !button">Удалить</button>
				<span ng-show="userDelete">
					<h6>Вы точно хотите удалить пользователя?
					<button type="submit" class="btn btn-success btn-xs col-md-offset-1" ng-click="removeRow(user.username)">Удалить</button>
						<button type="button" class="btn btn-danger btn-xs col-md-offset-1" ng-click="userDelete = !userDelete; button = !button">Отмена</button>
					</h6>
					
				</span>
			</div>
		</div>
	</div>
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="bootstrap/js/bootstrap.min.js"></script>
	<script src='angularjs/angular.js'></script>
	<script src='angularjs/controllers.js'></script>
</body>
</html>